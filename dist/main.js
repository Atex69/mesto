(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,r(o.key),o)}}function n(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(t){var n=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===e(n)?n:String(n)}var o=function(){function e(t,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n(this,"_showInputError",(function(e,t){var n=o._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(o._inputErrorClass),n.textContent=t,n.classList.add(o._errorClass)})),n(this,"_hideInputError",(function(e){var t=o._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(o._inputErrorClass),t.classList.remove(o._errorClass),t.textContent=""})),n(this,"_checkInputValidity",(function(e){e.validity.valid?o._hideInputError(e):o._showInputError(e,e.validationMessage)})),n(this,"toggleButtonState",(function(){o._hasInvalidInput(o._inputList)?o._setButtonDisabled(o._buttonElement):o._setButtonEnabled(o._buttonElement)})),n(this,"_setEventListeners",(function(){o.toggleButtonState(),o._inputList.forEach((function(e){e.addEventListener("input",(function(){o.toggleButtonState(),o._checkInputValidity(e)}))}))})),n(this,"_hasInvalidInput",(function(e){return e.some((function(e){return!e.validity.valid}))})),n(this,"enableValidation",(function(){o._setEventListeners()})),this._formElement=r,this._inputSelector=t.inputSelector,this._submitSelector=t.submitSelector,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._inactiveButtonClass=t.inactiveButtonClass,this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitSelector)}var r,o;return r=e,(o=[{key:"_setButtonDisabled",value:function(){this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.setAttribute("disabled","disabled")}},{key:"_setButtonEnabled",value:function(){this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.removeAttribute("disabled")}}])&&t(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),e}(),i={formSelector:".popup__form",inputSelector:".popup__input",inactiveButtonClass:"popup__submit_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_active",submitSelector:".popup__submit"};function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function l(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===u(t)?t:String(t)}var p=l((function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,"_getTemplate",(function(){return document.querySelector(".card-template").content.querySelector(".element").cloneNode(!0)})),c(this,"_handleLikeClick",(function(e){e.target.classList.toggle("element__like_active")})),c(this,"_deleteCard",(function(e){e.currentTarget.closest(".element").remove()})),c(this,"render",(function(){var e=r._getTemplate();e.querySelector(".element__title").textContent=r._data.name;var t=e.querySelector(".element__image");return t.alt=r._data.name,t.src=r._data.link,t.addEventListener("click",(function(){return r._openPopupImage(r._data)})),e.querySelector(".element__like").addEventListener("click",r._handleLikeClick),e.querySelector(".element__delete-card").addEventListener("click",r._deleteCard),e})),this._data=t,this._openPopupImage=n}));function d(e){e.classList.add("popup_opened"),document.addEventListener("keydown",m),e.addEventListener("mousedown",f)}function _(e){e.classList.remove("popup_opened"),document.removeEventListener("keydown",m),e.removeEventListener("mousedown",f)}function m(e){"Escape"===e.key&&_(document.querySelector(".popup_opened"))}var f=function(e){e.target.classList.contains("popup_opened")&&_(e.target)},y=document.querySelector(".popup_type_user"),v=document.querySelector(".popup__close_type_user"),b=document.querySelector(".profile__info-title"),h=document.querySelector(".profile__info-subtitle"),S=new o(i,y);S.enableValidation();var E=document.querySelector(".popup__form_type_user");E.addEventListener("submit",(function(e){e.preventDefault(),b.textContent=g.value,h.textContent=k.value,_(y)}));var g=document.querySelector(".popup__input_type_name"),k=document.querySelector(".popup__input_type_description");E.querySelector(".popup__submit_type_user");var q=document.querySelector(".profile__info-edit-button"),L=document.querySelector(".profile__add-button");q.addEventListener("click",(function(){d(y),g.value=b.textContent,k.value=h.textContent,S.toggleButtonState()})),L.addEventListener("click",(function(){d(C),P.reset(),B.toggleButtonState()})),v.addEventListener("click",(function(){return _(y)}));var C=document.querySelector(".popup_type_place"),w=document.querySelector(".popup__close_type_place"),x=document.querySelector(".popup__input_type_title"),j=document.querySelector(".popup__input_type_link"),B=new o(i,C);B.enableValidation();var I=function(){return _(C)};w.addEventListener("click",I);var P=document.querySelector(".popup__form_type_place");P.addEventListener("submit",(function(e){e.preventDefault();var t=M({name:x.value,link:j.value});H.prepend(t),I()})),P.querySelector(".popup__submit_type_place");var T=document.querySelector(".popup_type_image"),D=document.querySelector(".popup__caption"),O=document.querySelector(".popup__close_type_image"),V=document.querySelector(".popup__image"),A=function(e){V.src=e.link,D.textContent=e.name,V.alt=e.name,d(T)};O.addEventListener("click",(function(){return _(T)}));var M=function(e){return new p(e,A,".card-template").render()},H=document.querySelector(".elements__container");[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Сочи",link:"https://images.unsplash.com/photo-1668889495576-bbd35db21a66?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=687&q=80"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){var t=M(e);H.prepend(t)}))})();